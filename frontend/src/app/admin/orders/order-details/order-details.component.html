<app-admin-card *ngIf="order">

  <h2>Order #{{ order.id }}</h2>

  <div class="grid">

    <div class="section">
      <h3>Customer</h3>
      <p>{{ order.userEmail }}</p>
      <p>{{ order.shippingAddress }}</p>
    </div>

    <div class="section">
      <h3>Payment</h3>
      <p>Status: <strong>{{ order.paymentStatus }}</strong></p>
      <p>Method: {{ order.paymentMethod }}</p>
    </div>

  </div>

  <h3>Items</h3>
  <table class="admin-table">
    <thead>
    <tr>
      <th>Product</th>
      <th>Qty</th>
      <th>Price</th>
      <th>Total</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let item of order.items">
      <td>{{ item.productName }}</td>
      <td>{{ item.quantity }}</td>
      <td>${{ item.price }}</td>
      <td>${{ item.quantity * item.price }}</td>
    </tr>
    </tbody>
  </table>

  <div class="actions">
    <button class="btn-primary" (click)="markShipped()" *ngIf="order.status === 'PLACED'">
      Mark as Shipped
    </button>

    <button class="btn-danger"
            *ngIf="order.paymentStatus === 'PAID' && order.status !== 'REFUNDED'"
            (click)="openRefund()">
      Issue Refund
    </button>


    <button class="btn-danger" (click)="cancelOrder()" *ngIf="order.status !== 'CANCELLED'">
      Cancel Order
    </button>
  </div>

</app-admin-card>
